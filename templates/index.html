<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>장애인 농구 앱</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: 'Apple SD Gothic Neo', 'Noto Sans KR', sans-serif;
            background-color: #f4f7fe;
            color: #333;
            line-height: 1.5;
            max-width: 500px;
            margin: 0 auto;
        }
        .header {
            background-color: #2977ff;
            color: white;
            padding: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .header-left {
            display: flex;
            align-items: center;
        }
        .header-right {
            display: flex;
            align-items: center;
        }
        .header h1 {
            font-size: 18px;
            margin-left: 10px;
        }
        .back-button {
            color: white;
            font-size: 24px;
            text-decoration: none;
            margin-right: 5px;
        }
        .container {
            padding: 20px;
        }
        .card {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            padding: 20px;
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        .card-icon {
            background-color: #2977ff;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 24px;
            margin-bottom: 15px;
        }
        .card h2 {
            font-size: 20px;
            margin-bottom: 10px;
        }
        .card p {
            color: #666;
            font-size: 14px;
            margin-bottom: 0;
        }
        .location-row {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        .location-icon {
            color: #666;
            margin-right: 5px;
        }
        .tag {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            margin-right: 5px;
            margin-bottom: 5px;
        }
        .tag-green {
            background-color: #e8f5e9;
            color: #388e3c;
        }
        .tag-blue {
            background-color: #e3f2fd;
            color: #1976d2;
        }
        .tag-yellow {
            background-color: #fff8e1;
            color: #ffa000;
        }
        .tag-red {
            background-color: #ffebee;
            color: #d32f2f;
        }
        .section {
            display: none;
        }
        .section.active {
            display: block;
        }
        .court-list-item {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            padding: 15px;
            margin-bottom: 15px;
        }
        .court-name {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .court-address {
            color: #666;
            font-size: 14px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        .tag-list {
            margin-top: 10px;
        }
        .search-box {
            background-color: white;
            border-radius: 25px;
            display: flex;
            align-items: center;
            padding: 10px 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .search-box input {
            border: none;
            outline: none;
            width: 100%;
            font-size: 14px;
            margin-left: 10px;
        }
        .add-button {
            background-color: #2977ff;
            color: white;
            border: none;
            border-radius: 25px;
            padding: 15px;
            width: 100%;
            font-size: 16px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .add-button svg {
            margin-right: 10px;
        }
        input, textarea, select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-size: 14px;
            color: #555;
        }
        .form-group {
            margin-bottom: 15px;
        }
        button {
            cursor: pointer;
        }
        .bottom-button {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            max-width: 500px;
            margin: 0 auto;
            padding: 15px;
        }
        .form-row {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .form-group.half {
            width: 48%;
        }
        
        .form-section {
            margin-bottom: 25px;
        }
        
        .form-section h3 {
            font-size: 16px;
            margin-bottom: 15px;
            color: #333;
        }
        
        .radio-group, .checkbox-group {
            margin-bottom: 15px;
        }
        
        .radio-group label, .checkbox-group label {
            display: block;
            margin-bottom: 8px;
        }
        
        .help-text {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
        
        .icon {
            margin-right: 5px;
        }
        
        .info-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .review-item {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .review-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .reviewer {
            font-weight: bold;
        }
        
        .date {
            color: #666;
            font-size: 12px;
        }
        
        .rating {
            margin-bottom: 15px;
        }
        
        .stars {
            color: #FFD700;
        }
        
        .count {
            color: #666;
            font-size: 14px;
            margin-left: 5px;
        }
        
        .game-date, .game-time, .game-participants {
            color: #666;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
        }
        
        .login-button {
            color: white;
            background-color: transparent;
            border: 1px solid white;
            border-radius: 4px;
            padding: 5px 10px;
            font-size: 12px;
            cursor: pointer;
        }
        
        .mypage-button {
            color: white;
            background-color: transparent;
            border: 1px solid white;
            border-radius: 4px;
            padding: 5px 10px;
            font-size: 12px;
            display: none; /* 초기에는 숨김 */
            cursor: pointer;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 100;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 10px;
            max-width: 400px;
            width: 90%;
            margin: 100px auto;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .modal-title {
            font-size: 18px;
            font-weight: bold;
        }
        
        .modal-close {
            font-size: 20px;
            cursor: pointer;
            background: transparent;
            border: none;
        }
        
        .user-info-item {
            display: flex;
            margin-bottom: 15px;
            align-items: center;
        }
        
        .user-info-label {
            width: 80px;
            font-weight: bold;
            color: #555;
        }
        
        .user-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: #e0e0e0;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto 20px;
            font-size: 30px;
            color: #888;
        }
    </style>
</head>
<body>
    <!-- 메인 화면 -->
    <div id="main-screen" class="section active">
        <div class="header">
            <div class="header-left">
                <h1>서울 강남구</h1>
            </div>
            <div class="header-right">
                <button class="login-button" onclick="showLogin()">로그인</button>
                <button class="mypage-button" onclick="showMyPage()">마이페이지</button>
            </div>
        </div>
        <div class="container">
            <div class="card" onclick="showSection('register-game')">
                <div class="card-icon">
                    <span>+</span>
                </div>
                <h2>경기 등록하기</h2>
                <p>나만의 농구 경기를 만들어보세요</p>
            </div>
            
            <div class="card" onclick="showSection('join-game')">
                <div class="card-icon">
                    <span>👥</span>
                </div>
                <h2>경기 신청하기</h2>
                <p>열린 농구 경기에 참여해보세요</p>
            </div>
            
            <div class="card" onclick="showSection('courts')">
                <div class="card-icon">
                    <span>📍</span>
                </div>
                <h2>운동장/체육관 정보</h2>
                <p>접근성 정보 확인 및 등록하기</p>
            </div>
        </div>
    </div>

    <!-- 운동장/체육관 목록 -->
    <div id="courts" class="section">
        <div class="header">
            <div class="header-left">
                <a href="#" class="back-button" onclick="showSection('main-screen')">←</a>
                <h1>운동장/체육관 정보</h1>
            </div>
            <div class="header-right">
                <button class="login-button" onclick="showLogin()">로그인</button>
                <button class="mypage-button" onclick="showMyPage()">마이페이지</button>
            </div>
        </div>
        <div class="container">
            <div class="search-box">
                <span>🔍</span>
                <input type="text" placeholder="체육관 검색">
            </div>
            
            <button class="add-button" onclick="showSection('add-court')">
                <span>+</span> 새 운동장/체육관 등록하기
            </button>
            
            <div id="courts-list">
                <!-- 동적으로 생성될 코트 목록 -->
            </div>
        </div>
    </div>

    <!-- 새 운동장/체육관 등록 -->
    <div id="add-court" class="section">
        <div class="header">
            <div class="header-left">
                <a href="#" class="back-button" onclick="showSection('courts')">←</a>
                <h1>새 운동장/체육관 등록</h1>
            </div>
            <div class="header-right">
                <button class="login-button" onclick="showLogin()">로그인</button>
                <button class="mypage-button" onclick="showMyPage()">마이페이지</button>
            </div>
        </div>
        <div class="container">
            <div class="form-section">
                <h3>기본 정보</h3>
                <div class="form-group">
                    <label for="court-name">시설 이름</label>
                    <input type="text" id="court-name" placeholder="예: OO체육관, XX농구코트">
                </div>
                
                <div class="form-group">
                    <label for="court-address">주소</label>
                    <input type="text" id="court-address" placeholder="예: 서울시 강남구 삼성동 123-45">
                </div>
                
                <div class="form-group">
                    <label for="court-phone">연락처</label>
                    <input type="text" id="court-phone" placeholder="예: 02-123-4567">
                </div>
                
                <div class="form-group">
                    <label for="court-hours">운영 시간</label>
                    <input type="text" id="court-hours" placeholder="예: 평일 09:00-22:00, 주말 10:00-18:00">
                </div>
            </div>
            
            <div class="form-section">
                <h3>접근성 정보</h3>
                <p>휠체어 접근성</p>
                <div class="radio-group">
                    <label>
                        <input type="radio" name="wheelchair" value="excellent">
                        매우 좋음
                    </label>
                    <label>
                        <input type="radio" name="wheelchair" value="good">
                        양호
                    </label>
                    <label>
                        <input type="radio" name="wheelchair" value="limited">
                        보통
                    </label>
                    <label>
                        <input type="radio" name="wheelchair" value="poor">
                        어려움
                    </label>
                </div>
                
                <p>시설 특징 (해당하는 항목 모두 선택)</p>
                <div class="checkbox-group">
                    <label>
                        <input type="checkbox" name="facilities" value="ramp">
                        경사로 있음
                    </label>
                    <label>
                        <input type="checkbox" name="facilities" value="elevator">
                        엘리베이터 있음
                    </label>
                    <label>
                        <input type="checkbox" name="facilities" value="toilet">
                        장애인 화장실
                    </label>
                    <label>
                        <input type="checkbox" name="facilities" value="parking">
                        장애인 주차구역
                    </label>
                    <label>
                        <input type="checkbox" name="facilities" value="auto-door">
                        자동문
                    </label>
                    <label>
                        <input type="checkbox" name="facilities" value="wide-space">
                        넓은 휠공간
                    </label>
                    <label>
                        <input type="checkbox" name="facilities" value="flat-ground">
                        평평한 바닥
                    </label>
                    <label>
                        <input type="checkbox" name="facilities" value="tactile">
                        전용 탈의실
                    </label>
                </div>
                
                <p>장애물/주의사항 (있는 경우)</p>
                <div class="checkbox-group">
                    <label>
                        <input type="checkbox" name="obstacles" value="stairs">
                        계단 있음
                    </label>
                    <label>
                        <input type="checkbox" name="obstacles" value="narrow">
                        좁은 통로
                    </label>
                    <label>
                        <input type="checkbox" name="obstacles" value="slope">
                        가파른 경사
                    </label>
                    <label>
                        <input type="checkbox" name="obstacles" value="uneven">
                        울퉁불퉁한 지면
                    </label>
                </div>
            </div>
            
            <div class="form-section">
                <h3>상세 설명</h3>
                <textarea id="court-description" rows="5" placeholder="시설에 대한 상세 설명과 접근성 관련 추가 정보를 입력해주세요"></textarea>
            </div>
            
            <div class="form-section">
                <h3>사진 등록 (선택사항)</h3>
                <div class="photo-upload">
                    <button id="upload-photo-btn" class="add-button">
                        <span>↑</span>
                        사진을 등록해주세요
                    </button>
                    <p class="help-text">시설 입구, 내부, 화장실 등의 사진</p>
                </div>
            </div>
            
            <button onclick="addCourt()" class="add-button bottom-button">운동장/체육관 등록하기</button>
        </div>
    </div>
    
    <!-- 코트 상세 정보 -->
    <div id="court-detail" class="section">
        <div class="header">
            <div class="header-left">
                <a href="#" class="back-button" onclick="showSection('courts')">←</a>
                <h1>체육관 상세 정보</h1>
            </div>
            <div class="header-right">
                <button class="login-button" onclick="showLogin()">로그인</button>
                <button class="mypage-button" onclick="showMyPage()">마이페이지</button>
            </div>
        </div>
        <div class="container">
            <div class="map-placeholder" style="height: 200px; background-color: #e9f1fd; border-radius: 10px; margin-bottom: 20px; display: flex; justify-content: center; align-items: center;">
                <span style="color: #2977ff; font-size: 36px;">📍</span>
            </div>
            
            <div id="court-detail-content">
                <!-- 동적으로 코트 상세 정보 표시 -->
            </div>
            
            <div class="reviews-section">
                <h3>이용자 평가</h3>
                <div class="rating">
                    <span class="stars">⭐⭐⭐⭐⭐</span>
                    <span class="count">(12명 평가)</span>
                </div>
                
                <div class="review-list" id="review-list">
                    <!-- 동적으로 리뷰 내용 표시 -->
                </div>
            </div>
        </div>
    </div>

    <!-- 경기 등록하기 -->
    <div id="register-game" class="section">
        <div class="header">
            <div class="header-left">
                <a href="#" class="back-button" onclick="showSection('main-screen')">←</a>
                <h1>경기 등록하기</h1>
            </div>
            <div class="header-right">
                <button class="login-button" onclick="showLogin()">로그인</button>
                <button class="mypage-button" onclick="showMyPage()">마이페이지</button>
            </div>
        </div>
        <div class="container">
            <div class="form-section">
                <h3>경기장 선택</h3>
                <div class="form-group">
                    <label for="game-court">장소를 선택하세요</label>
                    <select id="game-court">
                        <option value="">장소를 선택하세요</option>
                    </select>
                </div>
            </div>
            
            <div class="form-section">
                <h3>날짜 및 시간</h3>
                <div class="form-group">
                    <label for="game-date">날짜</label>
                    <input type="date" id="game-date">
                </div>
                <div class="form-row">
                    <div class="form-group half">
                        <label for="game-start-time">시작 시간</label>
                        <select id="game-start-time">
                            <option value="">시작 시간</option>
                            <option value="09:00">09:00</option>
                            <option value="10:00">10:00</option>
                            <option value="11:00">11:00</option>
                            <option value="12:00">12:00</option>
                            <option value="13:00">13:00</option>
                            <option value="14:00">14:00</option>
                            <option value="15:00">15:00</option>
                            <option value="16:00">16:00</option>
                            <option value="17:00">17:00</option>
                            <option value="18:00">18:00</option>
                            <option value="19:00">19:00</option>
                            <option value="20:00">20:00</option>
                        </select>
                    </div>
                    <div class="form-group half">
                        <label for="game-end-time">종료 시간</label>
                        <select id="game-end-time">
                            <option value="">종료 시간</option>
                            <option value="10:00">10:00</option>
                            <option value="11:00">11:00</option>
                            <option value="12:00">12:00</option>
                            <option value="13:00">13:00</option>
                            <option value="14:00">14:00</option>
                            <option value="15:00">15:00</option>
                            <option value="16:00">16:00</option>
                            <option value="17:00">17:00</option>
                            <option value="18:00">18:00</option>
                            <option value="19:00">19:00</option>
                            <option value="20:00">20:00</option>
                            <option value="21:00">21:00</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="form-section">
                <h3>참가자 정보</h3>
                <div class="form-group">
                    <label for="game-level">난이도</label>
                    <select id="game-level">
                        <option value="">난이도</option>
                        <option value="beginner">초보자 환영</option>
                        <option value="intermediate">중급자</option>
                        <option value="advanced">상급자</option>
                        <option value="all">모든 레벨</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="game-max-players">최대 인원</label>
                    <select id="game-max-players">
                        <option value="4">4명</option>
                        <option value="6">6명</option>
                        <option value="8">8명</option>
                        <option value="10">10명</option>
                        <option value="12">12명</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="game-requirements">추가 요구사항 (휠체어 접근성 등)</label>
                    <textarea id="game-requirements" rows="3" placeholder="휠체어 접근성 등 추가적인 요구사항이 있다면 입력해주세요"></textarea>
                </div>
            </div>
            
            <div class="form-section">
                <h3>경기 설명</h3>
                <div class="form-group">
                    <label for="game-description">경기에 대한 설명과 참가자에게 전달할 내용을 작성해주세요</label>
                    <textarea id="game-description" rows="5"></textarea>
                </div>
            </div>
            
            <button onclick="registerGame()" class="add-button bottom-button">경기 등록하기</button>
        </div>
    </div>
    
    <!-- 경기 신청하기 -->
    <div id="join-game" class="section">
        <div class="header">
            <div class="header-left">
                <a href="#" class="back-button" onclick="showSection('main-screen')">←</a>
                <h1>경기 신청하기</h1>
            </div>
            <div class="header-right">
                <button class="login-button" onclick="showLogin()">로그인</button>
                <button class="mypage-button" onclick="showMyPage()">마이페이지</button>
            </div>
        </div>
        <div class="container">
            <div class="search-box">
                <span>🔍</span>
                <input type="text" placeholder="경기 검색">
            </div>
            
            <div id="games-list">
                <!-- 동적으로 생성될 경기 목록 -->
            </div>
        </div>
    </div>
    
    <!-- 경기 상세 정보 -->
    <div id="game-detail" class="section">
        <div class="header">
            <div class="header-left">
                <a href="#" class="back-button" onclick="showSection('join-game')">←</a>
                <h1>경기 상세 정보</h1>
            </div>
            <div class="header-right">
                <button class="login-button" onclick="showLogin()">로그인</button>
                <button class="mypage-button" onclick="showMyPage()">마이페이지</button>
            </div>
        </div>
        <div class="container">
            <div id="game-detail-content">
                <!-- 동적으로 경기 상세 정보 표시 -->
            </div>
            
            <button onclick="applyToGame()" class="add-button bottom-button">참가 신청하기</button>
        </div>
    </div>
    
    <!-- 경기 신청 확인 -->
    <div id="join-confirmation" class="section">
        <div class="header">
            <div class="header-left">
                <a href="#" class="back-button" onclick="showSection('join-game')">←</a>
                <h1>확인</h1>
            </div>
            <div class="header-right">
                <button class="login-button" onclick="showLogin()">로그인</button>
                <button class="mypage-button" onclick="showMyPage()">마이페이지</button>
            </div>
        </div>
        <div class="container" style="display: flex; flex-direction: column; justify-content: center; align-items: center; height: 80vh;">
            <div style="text-align: center; margin-bottom: 40px;">
                <div style="width: 80px; height: 80px; background-color: #2977ff; border-radius: 50%; display: flex; justify-content: center; align-items: center; margin: 0 auto 20px;">
                    <span style="color: white; font-size: 36px;">✓</span>
                </div>
                <h2>경기 신청 완료!</h2>
                <p>귀하의 참가 신청이 성공적으로 접수되었습니다. 주최자의 승인을 기다려주세요.</p>
            </div>
            <div>
                <button onclick="showSection('main-screen')" class="add-button" style="margin-bottom: 15px;">홈으로 돌아가기</button>
                <button onclick="showSection('join-game')" class="add-button" style="background-color: transparent; color: #2977ff; border: 1px solid #2977ff;">다른 경기 찾아보기</button>
            </div>
        </div>
    </div>

    <!-- 로그인 모달 -->
    <div id="login-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="modal-title">로그인</span>
                <button class="modal-close" onclick="closeLogin()">&times;</button>
            </div>
            
            <div class="form-group">
                <label for="login-email">이메일</label>
                <input type="email" id="login-email" placeholder="example@email.com">
            </div>
            
            <div class="form-group">
                <label for="login-password">비밀번호</label>
                <input type="password" id="login-password" placeholder="비밀번호를 입력하세요">
            </div>
            
            <button onclick="login()" class="add-button">로그인</button>
            
            <p style="text-align: center; margin-top: 15px; font-size: 14px; color: #666;">
                계정이 없으신가요? <a href="#" onclick="showSignup()">회원가입</a>
            </p>
        </div>
    </div>
    
    <!-- 회원가입 모달 -->
    <div id="signup-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="modal-title">회원가입</span>
                <button class="modal-close" onclick="closeSignup()">&times;</button>
            </div>
            
            <div class="form-group">
                <label for="signup-name">이름</label>
                <input type="text" id="signup-name" placeholder="이름을 입력하세요">
            </div>
            
            <div class="form-group">
                <label for="signup-email">이메일</label>
                <input type="email" id="signup-email" placeholder="example@email.com">
            </div>
            
            <div class="form-group">
                <label for="signup-password">비밀번호</label>
                <input type="password" id="signup-password" placeholder="비밀번호를 입력하세요">
            </div>
            
            <button onclick="signup()" class="add-button">회원가입</button>
            
            <p style="text-align: center; margin-top: 15px; font-size: 14px; color: #666;">
                이미 계정이 있으신가요? <a href="#" onclick="showLogin()">로그인</a>
            </p>
        </div>
    </div>
    
    <!-- 마이페이지 화면 -->
    <div id="mypage" class="section">
        <div class="header">
            <div class="header-left">
                <a href="#" class="back-button" onclick="showSection('main-screen')">←</a>
                <h1>마이페이지</h1>
            </div>
        </div>
        <div class="container">
            <div class="user-avatar">👤</div>
            
            <div class="card">
                <h3>내 정보</h3>
                <div class="user-info-item">
                    <div class="user-info-label">이름</div>
                    <div class="user-info-value" id="user-name">Test User</div>
                </div>
                <div class="user-info-item">
                    <div class="user-info-label">이메일</div>
                    <div class="user-info-value" id="user-email">test@example.com</div>
                </div>
            </div>
            
            <div class="card">
                <h3>나의 팀</h3>
                <div id="user-teams">
                    <p>Alpha Team</p>
                </div>
            </div>
            
            <div class="card">
                <h3>등록한 경기</h3>
                <div id="user-games">
                    <p>등록한 경기가 없습니다.</p>
                </div>
            </div>
            
            <div class="card">
                <h3>신청한 경기</h3>
                <div id="user-applied-games">
                    <p>신청한 경기가 없습니다.</p>
                </div>
            </div>
            
            <button onclick="logout()" class="add-button" style="background-color: #f44336;">로그아웃</button>
        </div>
    </div>

    <script>
        // 현재 사용자 정보 (로그인 상태 관리)
        let currentUser = null;
        
        // 현재 표시할 섹션 전환 함수
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');
            
            // 특정 섹션이 표시될 때 추가 작업
            if (sectionId === 'courts') {
                loadCourts();
            } else if (sectionId === 'register-game') {
                // 로그인 확인
                if (!currentUser) {
                    alert('경기 등록은 로그인 후 이용 가능합니다.');
                    showLogin();
                    return;
                }
                loadCourtsForGameRegistration();
            } else if (sectionId === 'join-game') {
                loadGames();
            }
        }
        
        // API 통신 함수
        async function fetchAPI(url, method = 'GET', body = null) {
            // 상대 경로 사용
            const options = {
                method,
                headers: {
                    'Content-Type': 'application/json'
                }
            };
            
            if (body) {
                options.body = JSON.stringify(body);
            }
            
            try {
                console.log('API 요청:', url);
                const response = await fetch(url, options);
                if (!response.ok) {
                    console.error('API 응답 오류:', response.status, response.statusText);
                    throw new Error(`HTTP error ${response.status}`);
                }
                return await response.json();
            } catch (error) {
                console.error('API 요청 오류:', error);
                return { error: error.message };
            }
        }
        
        // 코트 목록 로드 함수
        async function loadCourts() {
            const courts = await fetchAPI('/api/courts');
            const container = document.getElementById('courts-list');
            
            if (!courts || courts.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666;">등록된 코트가 없습니다.</p>';
                return;
            }
            
            let html = '';
            courts.forEach(court => {
                html += `
                    <div class="court-list-item" onclick="showCourtDetail(${court.id})">
                        <div class="court-name">${court.name}</div>
                        <div class="court-address">
                            <span class="location-icon">📍</span>
                            ${court.address}
                        </div>
                        <div class="tag-list">
                            <span class="tag tag-green">휠체어 접근 양호</span>
                            <span class="tag tag-green">경사로 있음</span>
                            <span class="tag tag-green">장애인 화장실</span>
                        </div>
                    </div>
                `;
            });
            container.innerHTML = html;
        }
        
        // 코트 추가 함수
        async function addCourt() {
            const name = document.getElementById('court-name').value;
            const address = document.getElementById('court-address').value;
            const description = document.getElementById('court-description').value;
            
            if (!name || !address) {
                alert('시설 이름과 주소는 필수입니다.');
                return;
            }
            
            try {
                const result = await fetchAPI('/api/courts', 'POST', {
                    name,
                    address,
                    description
                });
                
                if (result) {
                    alert('운동장/체육관이 성공적으로 등록되었습니다.');
                    showSection('courts');
                }
            } catch (error) {
                console.error('코트 등록 오류:', error);
                alert('등록 중 오류가 발생했습니다.');
            }
        }
        
        // 코트 상세 정보 로드
        async function loadCourtDetail(courtId) {
            const court = await fetchAPI(`/api/courts/${courtId}`);
            if (!court) {
                alert('코트 정보를 불러올 수 없습니다.');
                return;
            }
            
            const detailContainer = document.getElementById('court-detail-content');
            
            let html = `
                <h2>${court.name}</h2>
                <div class="info-item">
                    <span class="icon">📍</span>
                    <span>${court.address}</span>
                </div>
                <div class="info-item">
                    <span class="icon">📞</span>
                    <span>02-123-4567</span>
                </div>
                <div class="info-item">
                    <span class="icon">🕒</span>
                    <span>평일 09:00 - 22:00 / 주말 10:00 - 20:00</span>
                </div>
                
                <h3>접근성 정보</h3>
                <div class="tag-list">
                    <span class="tag tag-green">휠체어 접근 양호</span>
                    <span class="tag tag-green">경사로 있음</span>
                    <span class="tag tag-green">장애인 화장실</span>
                    <span class="tag tag-green">장애인 주차구역</span>
                    <span class="tag tag-green">엘리베이터</span>
                    <span class="tag tag-green">넓은 휠공간</span>
                </div>
                
                <h3>상세 설명</h3>
                <p>${court.description || '설명이 없습니다.'}</p>
                
                <p>체육관 내부에는 장애인 전용 화장실이 2개 마련되어 있으며, 탈의실도 휠체어 접근이 가능하도록 설계되어 있습니다. 특히 농구 코트의 바닥재는 미끄럼 방지 처리가 되어 있어 안전합니다.</p>
                
                <p>주차장에는 장애인 전용 주차구역이 6면 마련되어 있으며, 주차장에서 체육관 입구까지 경사로가 잘 설치되어 있어 접근성이 뛰어납니다.</p>
            `;
            
            detailContainer.innerHTML = html;
            
            // 리뷰 목록 생성
            const reviewList = document.getElementById('review-list');
            let reviewHtml = `
                <div class="review-item">
                    <div class="review-header">
                        <span class="reviewer">김OO님</span>
                        <span class="date">2023.09.15</span>
                    </div>
                    <p>휠체어로 이동하기 매우 편리했습니다. 화장실도 넓고 깨끗해서 좋았어요. 다른 장애인 친구들에게도 추천하고 싶은 시설입니다.</p>
                </div>
                <div class="review-item">
                    <div class="review-header">
                        <span class="reviewer">이OO님</span>
                        <span class="date">2023.08.27</span>
                    </div>
                    <p>농구장 바닥 상태가 매우 좋고, 휠체어 이동도 편리합니다. 직원분들도 매우 친절하게 도와주셨어요.</p>
                </div>
            `;
            reviewList.innerHTML = reviewHtml;
            
            // 섹션 표시
            showSection('court-detail');
        }
        
        // 코트 상세 정보 표시 함수 업데이트
        function showCourtDetail(courtId) {
            loadCourtDetail(courtId);
        }
        
        // 경기 등록용 코트 목록 로드
        async function loadCourtsForGameRegistration() {
            const courts = await fetchAPI('/api/courts');
            if (!courts || courts.length === 0) {
                alert('등록된 코트가 없습니다. 먼저 코트를 등록해주세요.');
                showSection('courts');
                return;
            }
            
            const courtSelect = document.getElementById('game-court');
            courtSelect.innerHTML = '<option value="">장소를 선택하세요</option>';
            
            courts.forEach(court => {
                courtSelect.innerHTML += `<option value="${court.id}">${court.name}</option>`;
            });
        }
        
        // 경기 등록
        async function registerGame() {
            const courtId = parseInt(document.getElementById('game-court').value);
            const gameDate = document.getElementById('game-date').value;
            const startTime = document.getElementById('game-start-time').value;
            const description = document.getElementById('game-description').value;
            
            if (!courtId || !gameDate || !startTime) {
                alert('장소, 날짜, 시작 시간은 필수 입력사항입니다.');
                return;
            }
            
            // ISO 8601 형식으로 날짜와 시간 변환
            const dateTime = `${gameDate}T${startTime}:00`;
            
            try {
                const result = await fetchAPI('/api/games', 'POST', {
                    court_id: courtId,
                    date_time: dateTime,
                    host_id: 1, // 테스트용 고정 호스트 ID
                    home_team_id: null, // 팀 정보 필요 없음
                    away_team_id: null, // 팀 정보 필요 없음
                    status: 'SCHEDULED'
                });
                
                if (result) {
                    alert('경기가 성공적으로 등록되었습니다.');
                    showSection('main-screen');
                }
            } catch (error) {
                console.error('경기 등록 오류:', error);
                alert('등록 중 오류가 발생했습니다.');
            }
        }
        
        // 경기 목록 로드
        async function loadGames() {
            const games = await fetchAPI('/api/games');
            const container = document.getElementById('games-list');
            
            if (!games || games.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666;">등록된 경기가 없습니다.</p>';
                return;
            }
            
            let html = '';
            games.forEach(game => {
                // 날짜 포맷팅
                const date = new Date(game.date_time);
                const formattedDate = `${date.getFullYear()}년 ${date.getMonth()+1}월 ${date.getDate()}일`;
                const formattedTime = `${date.getHours()}:00 - ${date.getHours()+2}:00`;
                
                // 참가자 수 (실제로는 API에서 가져와야 함)
                const participants = Math.floor(Math.random() * 5) + 2; // 테스트용 랜덤 숫자
                const maxParticipants = 8;
                
                // 게임 태그 (종류에 따라 다른 스타일 적용)
                let tagClass = 'tag-blue';
                let tagText = '초보자 환영';
                
                if (game.id % 3 === 0) {
                    tagClass = 'tag-yellow';
                    tagText = '중급자';
                } else if (game.id % 3 === 1) {
                    tagClass = 'tag-green';
                    tagText = '모든 레벨';
                }
                
                html += `
                    <div class="court-list-item" onclick="showGameDetail(${game.id})">
                        <div class="game-tag">
                            <span class="tag ${tagClass}">${tagText}</span>
                        </div>
                        <div class="court-name">${game.court ? game.court.name : '알 수 없는 장소'}</div>
                        <div class="game-date">
                            <span class="icon">📅</span>
                            ${formattedDate}
                        </div>
                        <div class="game-time">
                            <span class="icon">🕒</span>
                            ${formattedTime}
                        </div>
                        <div class="game-participants">
                            <span class="icon">👥</span>
                            ${participants}/${maxParticipants}명 참가 중
                        </div>
                    </div>
                `;
            });
            container.innerHTML = html;
        }
        
        // 현재 선택된 경기 ID
        let currentGameId = null;
        
        // 경기 상세 정보 로드
        async function loadGameDetail(gameId) {
            const game = await fetchAPI(`/api/games/${gameId}`);
            if (!game) {
                alert('경기 정보를 불러올 수 없습니다.');
                return;
            }
            
            currentGameId = gameId;
            
            const detailContainer = document.getElementById('game-detail-content');
            
            // 날짜 포맷팅
            const date = new Date(game.date_time);
            const formattedDate = `${date.getFullYear()}년 ${date.getMonth()+1}월 ${date.getDate()}일`;
            const formattedTime = `${date.getHours()}:00 - ${date.getHours()+2}:00`;
            
            // 참가자 수 (실제로는 API에서 가져와야 함)
            const participants = Math.floor(Math.random() * 5) + 2; // 테스트용 랜덤 숫자
            const maxParticipants = 8;
            
            // 게임 태그 (종류에 따라 다른 스타일 적용)
            let tagClass = 'tag-blue';
            let tagText = '초보자 환영';
            
            let html = `
                <div class="card">
                    <h2>${game.court ? game.court.name : '알 수 없는 장소'}</h2>
                    <div class="tag-list">
                        <span class="tag ${tagClass}">${tagText}</span>
                    </div>
                    
                    <div class="info-item">
                        <span class="icon">📅</span>
                        <span>${formattedDate}</span>
                    </div>
                    <div class="info-item">
                        <span class="icon">🕒</span>
                        <span>${formattedTime}</span>
                    </div>
                    <div class="info-item">
                        <span class="icon">📍</span>
                        <span>${game.court ? game.court.address : '주소 정보 없음'}</span>
                    </div>
                    <div class="info-item">
                        <span class="icon">👥</span>
                        <span>참가자: ${participants}/${maxParticipants}명</span>
                    </div>
                </div>
                
                <div class="card">
                    <h3>접근성 정보</h3>
                    <div class="tag-list">
                        <span class="tag tag-green">휠체어 접근 양호</span>
                        <span class="tag tag-green">장애인 화장실</span>
                        <span class="tag tag-green">장애인 주차구역</span>
                    </div>
                </div>
                
                <div class="card">
                    <h3>경기 설명</h3>
                    <p>${game.description || '경기 설명이 없습니다. 주최자에게 문의하세요.'}</p>
                </div>
                
                <div class="card">
                    <h3>주최자 정보</h3>
                    <div class="info-item">
                        <span class="icon">👤</span>
                        <span>${game.host ? game.host.name : '알 수 없음'}</span>
                    </div>
                </div>
            `;
            
            detailContainer.innerHTML = html;
            
            // 섹션 표시
            showSection('game-detail');
        }
        
        // 경기 상세 정보 표시
        function showGameDetail(gameId) {
            loadGameDetail(gameId);
        }
        
        // 경기 참가 신청
        function applyToGame() {
            if (!currentGameId) {
                alert('경기 정보가 올바르지 않습니다.');
                return;
            }
            
            // 실제로는 API 호출로 참가 신청 처리
            console.log(`경기 ID ${currentGameId}에 참가 신청`);
            showSection('join-confirmation');
        }
        
        // 로그인 관련 함수
        function showLogin() {
            document.getElementById('login-modal').style.display = 'block';
        }
        
        function closeLogin() {
            document.getElementById('login-modal').style.display = 'none';
        }
        
        function showSignup() {
            document.getElementById('login-modal').style.display = 'none';
            document.getElementById('signup-modal').style.display = 'block';
        }
        
        function closeSignup() {
            document.getElementById('signup-modal').style.display = 'none';
        }
        
        async function login() {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            if (!email || !password) {
                alert('이메일과 비밀번호를 입력해주세요.');
                return;
            }
            
            try {
                const result = await fetchAPI('/api/auth/login', 'POST', {
                    email,
                    password
                });
                
                if (result && !result.error) {
                    // 로그인 성공
                    currentUser = result;
                    
                    // 세션 스토리지에 저장
                    sessionStorage.setItem('currentUser', JSON.stringify(currentUser));
                    
                    // UI 업데이트
                    updateLoginState();
                    
                    // 로그인 모달 닫기
                    closeLogin();
                    
                    // 마이페이지 정보 업데이트
                    updateMyPageInfo();
                    
                    alert('로그인 되었습니다.');
                } else {
                    alert(result.error || '로그인에 실패했습니다.');
                }
            } catch (error) {
                console.error('로그인 오류:', error);
                alert('로그인 처리 중 오류가 발생했습니다.');
            }
        }
        
        async function signup() {
            const name = document.getElementById('signup-name').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            
            if (!name || !email || !password) {
                alert('모든 필드를 입력해주세요.');
                return;
            }
            
            try {
                const result = await fetchAPI('/api/auth/signup', 'POST', {
                    name,
                    email,
                    password
                });
                
                if (result && !result.error) {
                    alert('회원가입이 완료되었습니다. 로그인해주세요.');
                    closeSignup();
                    showLogin();
                } else {
                    alert(result.error || '회원가입에 실패했습니다.');
                }
            } catch (error) {
                console.error('회원가입 오류:', error);
                alert('회원가입 처리 중 오류가 발생했습니다.');
            }
        }
        
        function logout() {
            currentUser = null;
            // 세션 스토리지에서 사용자 정보 제거
            sessionStorage.removeItem('currentUser');
            updateLoginState();
            showSection('main-screen');
            alert('로그아웃 되었습니다.');
        }
        
        function updateLoginState() {
            const loginButton = document.querySelector('.login-button');
            const mypageButton = document.querySelector('.mypage-button');
            
            if (currentUser) {
                // 로그인된 상태
                loginButton.style.display = 'none';
                mypageButton.style.display = 'block';
            } else {
                // 로그아웃된 상태
                loginButton.style.display = 'block';
                mypageButton.style.display = 'none';
            }
        }
        
        function showMyPage() {
            if (currentUser) {
                updateMyPageInfo();
                showSection('mypage');
            } else {
                alert('로그인이 필요합니다.');
                showLogin();
            }
        }
        
        function updateMyPageInfo() {
            if (currentUser) {
                document.getElementById('user-name').textContent = currentUser.name;
                document.getElementById('user-email').textContent = currentUser.email;
                
                // 여기에 사용자의 팀, 등록 경기, 신청 경기 정보를 로드하는 코드 추가
            }
        }
        
        // 페이지 로드 시 로그인 상태 확인 (테스트용 자동 로그인)
        window.addEventListener('DOMContentLoaded', function() {
            // 저장된 사용자 정보 확인
            const savedUserStr = sessionStorage.getItem('currentUser');
            if (savedUserStr) {
                try {
                    currentUser = JSON.parse(savedUserStr);
                    updateLoginState();
                    console.log('로그인 상태 복원 완료:', currentUser.name);
                } catch (e) {
                    console.error('저장된 사용자 정보 복원 실패:', e);
                    sessionStorage.removeItem('currentUser');
                }
            }
        });
    </script>
</body>
</html> 